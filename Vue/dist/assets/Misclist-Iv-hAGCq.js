import{_ as K,r as o,a as g,c as n,o as a,b as e,d as $,e as p,w as D,f as N,F as V,g as S,n as U,h as A,t as _,S as X,E as Z,D as ee,i as Y,j as oe,k as F,l as ie,m as q,p as te,q as ce,v as ue,s as re}from"./index-DcRnYEe0.js";const de={class:"HomePC"},ve={class:"Neirongs"},pe={class:"HomePC_Navs"},_e={class:"grid"},he=["onClick"],me={class:"card-title"},fe={style:{display:"flex","align-items":"center"}},ge={class:"card-description"},ye={class:"card-description"},xe={class:"card-description",style:{"margin-left":"15px"}},be={class:"card-description"},we={key:0,style:{padding:"20px"}},ke={class:"data-container"},Te={key:0,class:"data-row"},$e={class:"key-label"},Ce={class:"value-content"},ze={class:"truncated-text"},Me={__name:"MiscListPc",setup(H){const r=o(1),l=o(10),h=o(0),d=o([]),m=o(!1),y=o([]),w=o(""),x=()=>{X({page:r.value,limit:l.value,success:w.value}).then(v=>{d.value=v.data.items,h.value=v.data.total})},C=v=>{l.value=v,r.value=1,x()},u=v=>{r.value=v,x()},B=v=>{let c=JSON.parse(v.data);if(!v.success){Y(v.errorMessage);return}y.value=c,m.value=!0},b=()=>{Z.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee().then(v=>{Y({type:"success",message:"删除成功"}),r.value=1,x()})})},k=()=>{r.value=1,x()};return x(),(v,c)=>{const E=g("el-button"),f=g("el-radio-button"),O=g("el-radio-group"),P=g("el-text"),Q=g("el-tag"),L=g("el-pagination"),J=g("el-divider"),W=g("el-drawer");return a(),n("div",de,[e("div",ve,[e("div",pe,[p(E,{type:"danger",round:"",onClick:b},{default:D(()=>c[4]||(c[4]=[N("清空全部")])),_:1,__:[4]}),p(O,{modelValue:w.value,"onUpdate:modelValue":c[0]||(c[0]=i=>w.value=i),style:{"margin-left":"10px"},onChange:k},{default:D(()=>[p(f,{label:"全部",value:""}),p(f,{label:"成功",value:"true"}),p(f,{label:"失败",value:"false"})]),_:1},8,["modelValue"])]),e("div",_e,[(a(!0),n(V,null,S(d.value,i=>(a(),n("div",{key:i.id,class:"card"},[(a(),n("svg",{t:"1750044198871",onClick:j=>B(i),class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3441",width:"32",height:"32"},c[5]||(c[5]=[e("path",{d:"M298.666667 341.333333h384v42.666667H298.666667v-42.666667z m0 128h298.666666v42.666667H298.666667v-42.666667z m0 128h298.666666v42.666667H298.666667v-42.666667zM170.666667 128h682.666666v554.666667h42.666667V106.517333c0-11.52-9.557333-21.184-21.333333-21.184H149.333333c-11.626667 0-21.333333 9.557333-21.333333 21.376v810.581334C128 929.066667 137.557333 938.666667 149.333333 938.666667h490.666667v-42.666667H170.666667V128z m469.333333 576.042667c0-11.797333 9.728-21.376 21.376-21.376H896L640 938.666667V704.042667z m153.002667 21.290666H682.666667v110.336L793.002667 725.333333z",fill:"#3D3D3D","p-id":"3442"},null,-1)]),8,he)),e("h2",me,[p(P,{"line-clamp":"2"},{default:D(()=>[N(_(i.content),1)]),_:2},1024)]),e("div",fe,[e("div",null,[e("p",ge,"数据源："+_(i.sourceDatabase),1),e("p",ye,"同步库："+_(i.targetDatabase),1)]),e("p",xe,"数据表："+_(i.tableName),1)]),e("p",be,"同步时间："+_(i.syncTime),1),p(Q,{type:i.success?"success":"danger",style:{position:"absolute",bottom:"30px",right:"10px"}},{default:D(()=>[N(_(i.success?"成功":"失败"),1)]),_:2},1032,["type"])]))),128))]),h.value?(a(),n("div",we,[p(L,{"current-page":r.value,"onUpdate:currentPage":c[1]||(c[1]=i=>r.value=i),"page-size":l.value,"onUpdate:pageSize":c[2]||(c[2]=i=>l.value=i),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:C,onCurrentChange:u},null,8,["current-page","page-size","total"])])):$("",!0),p(W,{modelValue:m.value,"onUpdate:modelValue":c[3]||(c[3]=i=>m.value=i),title:"详情",direction:"rtl"},{default:D(()=>[e("div",ke,[(a(!0),n(V,null,S(y.value,(i,j)=>(a(),n("div",{class:U(["data-card",{"even-row":j%2===0}])},[(a(!0),n(V,null,S(Object.keys(i),z=>(a(),n("div",{key:z,style:{padding:"5px"}},[z!=="updated_at"?(a(),n("div",Te,[e("span",$e,_(z),1),e("span",Ce,[e("span",ze,_(i[z]),1)])])):$("",!0),z!=="updated_at"?(a(),A(J,{key:1,style:{margin:"5px 0"},"border-style":"dashed"})):$("",!0)]))),128))],2))),256))])]),_:1},8,["modelValue"])])])}}},De=K(Me,[["__scopeId","data-v-ee0209e8"]]),He={key:0,class:"modal-mask"},Re={key:1,class:"modal-content"},Ve={class:"detail-body"},Be={class:"data-container"},Le={key:0,class:"data-row"},Se={class:"key-label"},Ee={class:"value-content"},Ne={class:"truncated-text"},Oe={__name:"TaskDetailModal",props:{visible:Boolean,task:Array,fromRect:Object},emits:["close"],setup(H,{emit:r}){const l=H,h=r,d=o({}),m=o(!1),y=o(!1);let w=null;function x(){w&&(clearTimeout(w),w=null)}function C(){m.value=!1,y.value=!0,d.value={position:"fixed",left:`${l.fromRect.left}px`,top:`${l.fromRect.top}px`,width:`${l.fromRect.width}px`,height:`${l.fromRect.height}px`,background:"#fff",borderRadius:"12px",transition:"all 0.4s ease",zIndex:9999,overflow:"hidden"},ie(()=>{requestAnimationFrame(()=>{d.value={...d.value,left:0,top:0,width:"100vw",height:"100vh",borderRadius:"0"}}),x(),w=setTimeout(()=>{u()},450)})}function u(){x(),y.value&&(m.value=!0,y.value=!1)}function B(){x(),m.value=!1,y.value=!0,d.value={...d.value,left:`${l.fromRect.left}px`,top:`${l.fromRect.top}px`,width:`${l.fromRect.width}px`,height:`${l.fromRect.height}px`,borderRadius:"12px"},setTimeout(()=>{y.value=!1,h("close")},400)}return oe(()=>l.visible,b=>{b&&l.fromRect&&l.fromRect.width>0?C():b&&h("close")}),(b,k)=>{const v=g("el-divider");return H.visible?(a(),n("div",He,[e("div",{class:"animated-box",style:F(d.value),onTransitionend:u},[H.task?(a(),n("div",{key:0,class:U(["animated-cover",{showContent:m.value}])},k[0]||(k[0]=[e("div",{class:"cover-text"},"同步详情",-1)]),2)):$("",!0),m.value?(a(),n("div",Re,[e("div",{class:"detail-header"},[e("button",{class:"close-btn",onClick:B},"×"),k[1]||(k[1]=e("span",null,"同步任务详情",-1))]),e("div",Ve,[e("div",Be,[(a(!0),n(V,null,S(H.task,(c,E)=>(a(),n("div",{class:U(["data-card",{"even-row":E%2===0}])},[(a(!0),n(V,null,S(Object.keys(c),f=>(a(),n("div",{key:f,style:{padding:"5px"}},[f!=="updated_at"?(a(),n("div",Le,[e("span",Se,_(f),1),e("span",Ee,[e("span",Ne,_(c[f]),1)])])):$("",!0),f!=="updated_at"?(a(),A(v,{key:1,style:{margin:"5px 0"},"border-style":"dashed"})):$("",!0)]))),128))],2))),256))])])])):$("",!0)],36)])):$("",!0)}}},Pe=K(Oe,[["__scopeId","data-v-3eb98e6a"]]),je={class:"outer-container"},Ie={key:0,class:"hint-text"},Fe={key:1,class:"hint-text"},Ue={class:"misTit"},Ae={class:"item-list"},Ye=["onClick"],qe={style:{display:"flex","justify-content":"space-between"}},Qe={key:0,class:"load-more-indicator"},Je={key:1,class:"no-more"},I=60,We=120,Ge={__name:"MiscListH5",setup(H){const r=o([]),l=o(!1),h=o(!1),d=o(!1);let m=1;const y=o(!1),w=o(null),x=o(null),C=o(null),u=o(0),B=o(0),b=o(!1),k=q(()=>Math.min(u.value/I,1)),v=()=>{L()},c=q(()=>l.value?{}:{transform:`rotate(${k.value*180}deg) scale(${.5+k.value*.5})`,opacity:k.value}),E=()=>{Z.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee().then(t=>{Y({type:"success",message:"删除成功"}),L()})})},f=o(""),O=o(0),P=async t=>{const s=await X({page:t,success:f.value});return await new Promise(R=>setTimeout(R,1e3)),s.code===200?(O.value=s.data.total,s.data.items):[]},Q=(t,s)=>{const M=s.currentTarget.getBoundingClientRect();x.value={left:M.left,top:M.top,width:M.width,height:M.height};let G=JSON.parse(t.data);if(!t.success){Y(t.errorMessage);return}w.value=G,y.value=!0},L=async()=>{var s,R;l.value=!0,m=1,d.value=!1,u.value=I;const t=await P(m);r.value=t,l.value=!1,u.value=0,(R=(s=C.value)==null?void 0:s.scrollTo)==null||R.call(s,0,0)},J=async()=>{if(h.value||d.value)return;h.value=!0,m++;const t=await P(m);t.length===0?d.value=!0:(r.value.push(...t),r.value.length>=O.value&&(d.value=!0)),h.value=!1,u.value=0},W=t=>{if(C.value.scrollTop>0||l.value){u.value=0;return}b.value=!0,B.value=t.touches[0].clientY},i=t=>{if(!b.value||l.value)return;const s=t.touches[0].clientY-B.value;s>0&&(t.preventDefault(),u.value=Math.min(s*.5,We))},j=()=>{b.value&&(u.value>=I?L():u.value=0,b.value=!1)},z=o(!1),se=()=>{var t,s;(s=(t=C.value)==null?void 0:t.scrollTo)==null||s.call(t,{top:0,behavior:"smooth"})},ae=()=>{const t=C.value;t&&(t.scrollHeight-t.scrollTop-t.clientHeight<20&&!h.value&&!d.value&&J(),t.scrollTop<=0&&u.value!==0&&!b.value&&!l.value&&(u.value=0),z.value=t.scrollTop>200)};return te(()=>{let t=0;const s=()=>{t<I?(t+=4,u.value=t,requestAnimationFrame(s)):L()};s()}),(t,s)=>{const R=g("el-button"),M=g("el-radio-button"),G=g("el-radio-group"),le=g("el-tag");return a(),n(V,null,[e("div",je,[e("div",{class:"refresh-indicator",style:F({height:`${u.value}px`})},[e("div",{class:U(["spinner",{loading:l.value}]),style:F(c.value)},null,6),l.value?(a(),n("div",Fe," 刷新中... ")):(a(),n("div",Ie,_(k.value>=1?"松手刷新":"下拉刷新"),1))],4),ce(e("button",{class:"back-to-top",onClick:se},"↑",512),[[ue,z.value]]),e("div",Ue,[p(R,{size:"small",round:"",type:"danger",onClick:E},{default:D(()=>s[2]||(s[2]=[N("清空全部")])),_:1,__:[2]}),p(G,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=T=>f.value=T),style:{"margin-left":"10px"},onChange:v,size:"small"},{default:D(()=>[p(M,{label:"全部",value:""}),p(M,{label:"成功",value:"true"}),p(M,{label:"失败",value:"false"})]),_:1},8,["modelValue"])]),e("div",{class:"container",ref_key:"scrollContainer",ref:C,onTouchstart:W,onTouchmove:i,onTouchend:j,onScrollPassive:ae,style:F({transform:`translateY(${u.value}px)`,transition:b.value?"none":"transform 0.2s ease"})},[e("div",Ae,[(a(!0),n(V,null,S(r.value,T=>(a(),n("div",{class:"item-card",key:T.id},[(a(),n("svg",{t:"1750044198871",onClick:ne=>Q(T,ne),class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3441",width:"32",height:"32"},s[3]||(s[3]=[e("path",{d:"M298.666667 341.333333h384v42.666667H298.666667v-42.666667z m0 128h298.666666v42.666667H298.666667v-42.666667z m0 128h298.666666v42.666667H298.666667v-42.666667zM170.666667 128h682.666666v554.666667h42.666667V106.517333c0-11.52-9.557333-21.184-21.333333-21.184H149.333333c-11.626667 0-21.333333 9.557333-21.333333 21.376v810.581334C128 929.066667 137.557333 938.666667 149.333333 938.666667h490.666667v-42.666667H170.666667V128z m469.333333 576.042667c0-11.797333 9.728-21.376 21.376-21.376H896L640 938.666667V704.042667z m153.002667 21.290666H682.666667v110.336L793.002667 725.333333z",fill:"#3D3D3D","p-id":"3442"},null,-1)]),8,Ye)),e("p",null,"数据源："+_(T.sourceDatabase),1),e("p",null,"同步库："+_(T.targetDatabase),1),e("p",qe,[e("span",null,"数据表："+_(T.tableName),1),p(le,{type:T.success?"success":"danger",size:"small"},{default:D(()=>[N(_(T.success?"成功":"失败"),1)]),_:2},1032,["type"])]),e("p",null,"同步时间："+_(T.syncTime),1)]))),128))]),h.value?(a(),n("div",Qe,s[4]||(s[4]=[e("span",{class:"loader"},null,-1),e("span",null,"加载中...",-1)]))):$("",!0),d.value?(a(),n("div",Je," 没有更多内容啦~ ")):$("",!0)],36)]),p(Pe,{visible:y.value,task:w.value,fromRect:x.value,onClose:s[1]||(s[1]=T=>y.value=!1)},null,8,["visible","task","fromRect"])],64)}}},Ke=K(Ge,[["__scopeId","data-v-a79e2ab7"]]),Ze={__name:"Misclist",setup(H){const r=o(window.innerWidth),l=()=>{r.value=window.innerWidth};te(()=>{window.addEventListener("resize",l)}),re(()=>{window.removeEventListener("resize",l)});const h=q(()=>r.value<=768);return q(()=>h.value?1e3:1200),(d,m)=>h.value?(a(),A(Ke,{key:1})):(a(),A(De,{key:0}))}};export{Ze as default};
